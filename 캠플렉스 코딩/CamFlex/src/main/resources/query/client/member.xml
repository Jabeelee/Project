<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.camflex.client.member.dao.MemberDAO">

	<!-- 예약 취소 리스트 -->
	<select id="cancelList" parameterType="reservation" resultType="reservation">
		SELECT r_number, p_number, m_id, r_price, r_startdate, r_enddate, r_upddate, r_cancel
		FROM reservation_tbl
		WHERE r_state = '취소' AND m_id = #{m_id}
	</select>
	
	<!-- 회원 전체 명수를 조회한다. -->
	<select id="count" resultType="int">
		<![CDATA[
		SELECT count(n_number)
		FROM notice_tbl
		WHERE n_number > 0
		]]>
	</select>
	
	<!-- 지난 예약 리스트 -->
	<select id="pastList" parameterType="reservation" resultType="reservation">
		<![CDATA[
		SELECT rs.r_number, rs.p_number, rs.m_id, rs.r_price, rs.r_startdate, rs.r_enddate, rs.r_upddate, rs.r_cancel
		FROM reservation_tbl rs
		WHERE rs.m_id = #{m_id} AND rs.r_enddate < sysdate
		]]>
	</select>
	
	<!-- 리뷰 카운트 -->
	<select id="rv_count" resultType="int">
		SELECT rv_count
		FROM review_tbl
	</select>
	
</mapper>