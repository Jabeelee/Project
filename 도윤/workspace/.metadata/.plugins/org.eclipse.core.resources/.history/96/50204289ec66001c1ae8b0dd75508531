<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.camflex.admin.chart.dao.AdminChartDAO">
	<resultMap type="java.util.TreeMap" id="graph"></resultMap>
	<select id="campingZone" resultMap="graph">
		select count(case when p_number between 1 and 41 then 1 end)"오토",
				count(case when p_number between 42 and 45 then 1 end)"글램핑",
				count(case when p_number between 46 and 47 then 1 end)"차박"
		from reservation_tbl
	</select>
	
	<select id="monthlySales" resultMap="graph">
		select to_char(r_upddate, "yyyy/mm") as "월별", nvl(count(*), 0) as "매출"
		from reservation_tbl
		where to_char(r_upddate, "YYYY")
		group by to_char(r_upddate, "yyyy/mm")
		order by to_char(r_upddate, "yyyy/mm")
	</select>
</mapper>