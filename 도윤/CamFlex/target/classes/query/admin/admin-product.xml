<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.camflex.admin.product.dao.ProductDAO">
	<resultMap id="productVO"
		type="com.camflex.admin.product.vo.ProductVO">
		<result column="p_number" property="p_number" />
		<result column="p_type" property="p_type" />
		<result column="p_name" property="p_name" />
		<result column="p_price" property="p_price" />
		<result column="p_information" property="p_information" />
		<result column="p_photo" property="p_photo" />
		<result column="p_date" property="p_date" />
	</resultMap>
	
	<!-- 상품 기본 조회 -->
	<select id="productList" parameterType="com.camflex.admin.product.vo.ProductVO" resultMap="productVO">
		SELECT p_number, p_type, p_name, p_date
		FROM product_tbl
		ORDER BY
		p_number desc
	</select>

	<!-- 상품 등록 -->
	<insert id="regProduct" parameterType="com.camflex.admin.product.vo.ProductVO">
		<selectKey keyProperty="p_number" resultType="int"
			order="BEFORE">
			SELECT product_tbl_seq.nextval from dual
		</selectKey>
		INSERT INTO product_tbl(
		p_number, p_type, p_name, p_price, p_information, p_photo
		)
		VALUES(
		#{p_number}, #{p_type, jdbcType=VARCHAR}, #{p_name}, #{p_price}, #{p_information}, #{p_photo}
		)
	</insert>
	
	<select id="productDetail" parameterType="int" resultMap="productVO">
		select p_photo, p_type, p_name, p_information
		from product_tbl
		where p_number = #{p_number} 
	</select>
</mapper>